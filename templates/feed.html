<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>OSINTer</title>
		<link href="{{ url_for('static', filename='CSS/feed.css') }}" rel="stylesheet">
		<meta name="viewport" content="width=device-width initial-scale=1" />
		<style>
			:root {
				--pil-url: {{ url_for("static", filename="assets/pil.png")}}
			}
			{{ CSS|safe }}
		</style>

		<script>
			// Will contain the following variables: imageURLs, descriptions, titles and articleURLs

			{{ JS|safe }}
			
			// Counter for knowing which article has been reached when pressing the left or right arrow
			currentCounter = 0
			
			// Previewnumber is determining which of the preview windows is changed (0 for the left, 1 for the on in the middle and 2 for the right) and detailNumber is determining which entry in the arrays storing the title, sourceurls, imageurls and descriptions is used
			function changeIndividualPreview(previewNumber, detailNumber){
			
			
				document.querySelectorAll('a.article-link')[previewNumber].setAttribute("href", articleURLs[detailNumber])
				document.querySelectorAll('img.article-image')[previewNumber].setAttribute("src", imageURLs[detailNumber])
				document.querySelectorAll('div.desc h2')[previewNumber].textContent = titles[detailNumber]
				document.querySelectorAll('div.desc p')[previewNumber].textContent = descriptions[detailNumber]
			
			}
			
			// The currentNumber is variable for telling how far the user has scrolled right or left using the arrows (will often just be currentCounter)
			function changePreviews(currentNumber){
				for (let i = 0; i < 3; i++){
					changeIndividualPreview(i, ((i + currentNumber) % (imageURLs.length)))
				}
			}
			
			function arrowPress(left) {
				if (left) {
					currentCounter = currentCounter - 3
			
					if (currentCounter < 0) {
						currentCounter = (imageURLs.length) + currentCounter
					}
			
				} else {
			
					currentCounter = (currentCounter + 3) % (imageURLs.length)
			
				}

				changePreviews(currentCounter)
			}
			
			document.addEventListener('keydown', (event) => {
				if (event.code == "ArrowLeft") arrowPress(true);
				else if (event.code == "ArrowRight") arrowPress(false);
				else if (event.code == "ArrowDown") document.getElementById('expand-checkbox').checked = ""
				else if (event.code == "ArrowUp") document.getElementById('expand-checkbox').checked = "checked"
			});
		</script>

	</head>
	<body onload="changePreviews(0)">
		<input type="checkbox" id="expand-checkbox" checked/>
		<div id="top-container">
			<article id="introduction">
			<!-- <h1>Title</h1> --!>
				<div id="gallery-container">
					<span class="arrow" id="left-arrow" onclick="arrowPress(true)"></span>
					<div class="gallery">
					  <a class="article-link" target="_blank" href="">
					    <img src="" class="article-image">
					  </a>
					  <div class="desc">
					  <h2></h2>
					  <p></p>
					  </div>
					</div>

					<div class="gallery">
					  <a class="article-link" target="_blank" href="">
					    <img src="" class="article-image">
					  </a>
					  <div class="desc">
					  <h2></h2>
					  <p></p>
					  </div>
					</div>

					<div class="gallery">
					  <a class="article-link" target="_blank" href="">
					    <img src="" class="article-image">
					  </a>
					  <div class="desc">
					  <h2></h2>
					  <p></p>
					  </div>
					</div>
					<span class="arrow" id="right-arrow" onclick="arrowPress(false)"></span>
				</div>
			</article>
			<header>
				<div id="header-buttons">
					<label for="expand-checkbox" id="expand-icon" tabindex="0"></label>
				</div>
				<span id="logo">
					<a href="/">
						<img src="{{ url_for('static', filename='assets/newLogo.png') }}" alt="OSINTer"/>
					</a>
					<p>Intelligent webscraping</p>
				</span>
				<ul id="links">
					<li><a href="/config"><img src="{{ url_for('static', filename='assets/gear.png') }}" /></a></li>
					<li><a href="https://github.com/Combitech-DK/OSINTer"><img src="{{ url_for('static', filename='assets/github.png') }}" /></a></li>
				</ul>
		</header>
		</div>
		<section id="cards" aria-labelledby="title-header">
		{{ HTML|safe }}
		</section>
	</body>
	<!--
	 Disse sider vedligeholdes af Tor Rønnow. Du ser dem bedst med Internet Explorer 4.0.
	Kommentarer vedrørende disse sider er meget velkomne.
	 - bagkost.dk, 8. februar 1999
	-->
</html>
